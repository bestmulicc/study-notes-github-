## 前言
做为一个开发新人，除了要会开发，还得让人知道你要怎么开发才行。输出一份**谁都能看得懂的**技术方案，好过说千言万语。
特别是使用DDD设计的技术方案，如果没有一份文档的协助，要想让其他人能听得懂我的输出是很难的。所以，如何输出一篇技术方案就格外重要了！

技术方案通常是指：
```text
技术方案是指在解决某一问题或实现某一目标的过程中，所采用的技术手段、方法和流程的总体规划。它包括了技术选型、系统架构设计、技术实现方案、测试方案等内容。技术方案通常需要综合考虑技术可行性、资源投入、时间成本、安全性、可维护性等因素，以达到最优的解决方案。
```
（一个会写技术方案的后端开发才是好的后端开发。）
## 技术方案
以下同时也是我的技术方案的目录结构
### 项目背景，需求分析。等。。。
一些比较普遍的前情提要，大都可以在需求文档上面照搬，不过还是需要用自己的话，将需求还原描述出来，避免与产品经理的理解上产生误差（惨的是自己）。
#### 需求分析
```text
需求分析是指对用户需求进行系统性的研究、理解和分析，以确定系统或产品所需的功能、性能、接口、约束条件等要求的过程。在软件开发过程中，需求分析是非常关键的一环，它直接影响软件的质量和成本。需求分析需要充分了解用户的需求和期望，同时考虑系统或产品的实际情况，从而确定系统或产品的功能和特性，以满足用户的需求和期望。
```
需求分析主要分为2点，业务分析与难点分析。业务分析也是与项目背景类型，就是转述一遍产品的话。而难点分析主要是对于需求上一些比较难以实现，或者实现起来比较复杂的点进行一个描述。
*难点分析*
难点分析主要通过几个方面去思考：
* 需求的完整：需求分析需要确保所有的需求都被考虑到，并且没有遗漏任何一个重要的需求。这需要对业务和系统的全面了解和分析。
* 技术的复杂性：在某些情况下，需求分析可能涉及到复杂的技术问题，需要专业的知识和技能，以确保需求的准确性和可行性。
在我写技术方案的时候，这其实是作为一个后续补充项，因为对于我本人而言，在输出的技术方案并不多，且质量都不高的情况下。我很难就是说一下子就看出来这个需求，这个功能的难点跟痛点在哪，只能在我后面设计的时候进行一个补充。
### 概要设计
```text
概要设计是指在详细设计之前，对系统进行整体构思和规划的过程。
```
大概有以下几个目录结构需要补齐：
#### 系统架构设计
确定系统的整体结构和组成部分，涉及到的了哪些系统。为了让其他人可以更好的理解架构设计，最好加上一些图：架构图，时序图，流程图之类的。以便更好地理解方案的实现细节。
![](https://bestacou-1317041502.cos.ap-guangzhou.myqcloud.com/20230306221053.png)

#### 用例图
```text
用例图是一种UML（统一建模语言）图表，用于描述系统的功能和行为。它以用户（或者角色）的视角展示系统的功能需求，包括系统的输入、输出以及与外部系统的交互。用例图通常由用例、参与者和系统边界组成。用例图是软件开发过程中非常重要的一种模型，它可以帮助开发人员更好地理解需求，设计系统架构，以及进行测试和验证。
```
用例图，可以简单的把它理解为一个思维导图那样子去理解。值得注意的点是用例图，**它不关心你的系统怎么跑的**。这也是很关键的一点。更多的是要把自己代入角色的角度去看，比如普通用户有什么功能，管理员用户有什么功能之类的。
站在那个**角色的层面**出发去画就行了。
它的作用也是用于帮助做需求分析。

错误的用例图：
![](https://bestacou-1317041502.cos.ap-guangzhou.myqcloud.com/20230306222547.png)
还算能看的用例图：
![](https://bestacou-1317041502.cos.ap-guangzhou.myqcloud.com/20230306222629.png)

[用例图画图小技巧](https://zhuanlan.zhihu.com/p/110208443)
[用例图画图小工具-PlantUML](https://plantuml.com/zh/use-case-diagram)
[用例图画图小工具-语雀](https://www.yuque.com/dashboard)

#### 实体设计
```text
DDD中的实体是指具有唯一标识和生命周期的对象，它们不仅仅是数据结构，还包含着业务规则和行为。实体通常是业务的核心对象，它们与其他实体和值对象一起构成了领域模型。在DDD中，实体的状态和行为都是由业务规则决定的，因此实体的设计和实现需要深入理解业务领域。
```
实体设计的首要目标是满足业务需求，因此需要明确实体的功能需求，包括实体需要支持的操作、数据存储和查询等。
这里本人DDD理解一般。。这里的仅供参考，实体对我来说，是一个共性的抽象。它将很多共同的字段提取出来，做为一种规则去约束大家需要传递什么样的参数。在DDD的设计中，围绕实体，还有与前端交互的DTO，与存储层交互的PO。
传播流程大致为：前端传参->DTO->DO->PO->存储层。（DO=实体）
但是为什么这里只描述实体设计呢，很明显的，因为实体中包含了DTO和PO中的共性，但是DTO与PO并不完全等于实体。一个功能中，创建的DTO与更新的DTO的结构可能是不一样的，但是它们转成的实体却是同一个。
#### 代码设计
代码设计主要是描述代码的结构。需要将代码按照一定的规则和标准进行组织和分层。
一个好的代码结构应该具有以下特点：
* 模块化：将代码按照功能或业务逻辑进行划分，每个模块都应该有清晰的职责和接口，便于代码的复用和维护。
*  层次化：将代码按照层次进行划分，例如将表示层、业务逻辑层和数据访问层分开，每层都有自己的职责和接口，便于代码的扩展和替换。
*  规范化：遵循一定的编码规范和标准，例如命名规则、代码风格、注释规范等，便于代码的阅读和理解。
*  可测试性：代码结构应该考虑到测试的需求，例如将业务逻辑和数据访问分开，便于进行单元测试和集成测试。
* 可扩展性：代码结构应该考虑到未来的需求变化，例如将接口和实现分开，便于进行功能扩展和替换。

综上所述，一个好的代码结构应该具有模块化、层次化、规范化、可测试性和可扩展性等特点，以便于代码的管理、维护和扩展。
```text
│ ├── Application                     // 应用层
│ │ └── Service
│ ├── Infrastructure                  // 工具层
│ │ └── Util
│ │ │ └── Translation                 // 翻译工具
│ │ │ │ └── Service
│ │ │ │ └── Interfaces
│ ├── Domain                          // 领域层
│ │ └── Translation                   // 翻译领域
│ │ │ ├── Entity                      // 实体
│ │ │ │ ├── ValueObject               // 实体包含的值对象
│ │ │ ├── Repository                  // 仓储层
│ │ │ │ ├── Facade                    // 存储层对外功能接口
│ │ │ │ ├── Persistence               // 持久层
│ │ │ │ │ ├── Model                   // 模型
│ │ │ │ │ └── XxxRepository.php       // 接口实现
│ │ │ │ └── Po                        // 与Service层交互PO
│ │ │ └── Service                     // Service层
│ └── Interfaces                      // 接口层
│ │ ├──Assembler                      // 数据转换
│ │ ├── DTO                           // 与前端交互DTO
│ │ │ └── Translation                 // DTO        
│ │ ├── Facade                        // 接口层
│ │ │ └── Translation                 // 翻译接口
│ │ └── Validation                    // 验证器
│ │ │ └── Translation
```
### 详细设计
经过上面的描述之后，听者应该对技术方案的方向跟思路上有一个大致的模型了。那么这里还需要进行一个详细的设计补充，主要是在细节上的补充。以及对上文中需求分析中的难点分析的解决方案。
#### 核心功能设计
核心功能的设计主要就是概要设计中第一部分的实现，包含到接口名设计，接口参数，接口类型。以及接口的流程图
*接口设计需要注意以下的点
-   接口的命名应该清晰、简洁、易于理解。
-   接口的参数应该明确，避免使用过多的参数和参数类型。
-   接口的返回值应该清晰、明确、易于处理。
-   需要详细、全面、易于理解，包括接口的描述、参数说明、返回值说明、错误码说明等。
*流程图设计
-   流程图的逻辑应该清晰、易于理解，能够准确反映业务流程。
-   流程图的节点应该简洁、易于理解，避免过于复杂的节点。
-   流程图的异常处理需要考虑全面、准确，避免出现漏洞或歧义。
#### 存储设计
存储设计中需要包括，数据库选择方案，数据库架构设计，数据库表设计。
*存储方案*
存储方案的设计的目的是设计出满足业务需求的存储方案。
包含了不同的数据库方案，不同的表结构设计方案（宽表，窄表）。而得出的设计方案。
主要需要体现的是这种设计可以解决什么问题，这种设计的好处在哪？
### 开发计划
#### 开发人天
人天拆分~
#### 协同开发需求
是否需要其他系统协助开发功能，提供使用。
### Q&A
有就填写。。。
## 总结
综上所述，想要输出一篇好的技术方案，需要的是：
1.  确定目标和需求：明确技术方案的目标和需求，包括业务需求、系统规模、性能要求、安全要求等。分析现有技术和系统的状况，识别可能出现的问题和挑战，为技术方案的设计和实施提供参考。（项目背景，需求分析）
2. 设计架构和方案：根据目标和需求，设计合适的系统架构，考虑方案的可行性和可扩展性，包括系统的可维护性、可升级性、可扩展性。（概要设计）
3. 详细阐述方案：在技术方案中详细阐述系统的设计原理、技术实现方案、系统流程、接口规范等，尽量做到全面、准确、清晰。（详细设计）
4. 实施计划：在技术方案中给出实施计划，包括系统实施的时间、步骤、人员、资源等，确保方案能够顺利实施。（开发计划）
最重要的一点，*语言简洁*。
在输出技术方案时，需要使用简洁准确的语言，避免使用过于复杂的技术术语，写技术方案的目的，是为了让非技术人员也可能看得懂，也能理解到这样子设计的好处在哪儿。









